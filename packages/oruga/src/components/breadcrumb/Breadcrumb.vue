<script setup lang="ts">
import { computed } from "vue";

import { getDefault } from "@/utils/config";
import { defineClasses } from "@/composables";

import type { BreadcrumbProps } from "./props";

/**
 * The classic breadcrumb, in different colors, sizes, and states
 * @displayName Breadcrumb
 * @style _breadcrumb.scss
 */
defineOptions({
    isOruga: true,
    name: "OBreadcrumb",
    configField: "breadcrumb",
});

const props = withDefaults(defineProps<BreadcrumbProps>(), {
    override: undefined,
    size: () => getDefault("breadcrumb.size", "small"),
    align: () => getDefault("breadcrumb.align", "left"),
    separator: () => getDefault("breadcrumb.separator", "has-slash-separator"),
    tag: () => getDefault("breadcrumb.tag", "section"),
});

// const props = defineProps({
//     /** Override existing theme classes completely */
//     override: { type: Boolean, default: undefined },
//     /**
//      * Size of the breadcrumb
//      * @values small, medium, large
//      */
//     size: {
//         type: String,
//         default: () => getOption("breadcrumb.size", "small"),
//     },
//     /**
//      * Position of the breadcrumb
//      * @values left, centered, right
//      */
//     align: {
//         type: String,
//         default: getOption("breadcrumb.align", "left"),
//     },
//     /**
//      * The breadcrumb separator between breadcrumb items
//      * @values
//      *  has-arrow-separator, has-dot-separator, has-slash-separator, has-bullet-separator, has-succeeds-separator, has-chevron-separator
//      */
//     separator: {
//         type: String,
//         default: () => getOption("breadcrumb.separator", "has-slash-separator"),
//     },
//     /**
//      * Tag of the breadcrumb
//      * @values div, section ...
//      */
//     tag: {
//         type: [String, Object, Function] as PropType<DynamicComponent>,
//         default: () => getOption("breadcrumb.tag", "section"),
//     },
//     // -----------------------------------------------------------------
//     /**
//      * This is used internally
//      * @ignore
//      */
//     // class props (will not be displayed in the docs)
//     /** Class of the root element */
//     rootClass: {
//         type: [String, Array, Function] as PropType<ComponentClass>,
//         default: undefined,
//     },
//     /** Class of the breadcrumb elements wrapper */
//     wrapperClass: {
//         type: [String, Array, Function] as PropType<ComponentClass>,
//         default: undefined,
//     },
//     /** Class of the breadcrumb size */
//     sizeClass: {
//         type: [String, Array, Function] as PropType<ComponentClass>,
//         default: undefined,
//     },
//     /** Class of the breadcrumb separator */
//     separatorClass: {
//         type: [String, Array, Function] as PropType<ComponentClass>,
//         default: undefined,
//     },
//     /** Class of the breadcrumb align */
//     alignClass: {
//         type: [String, Array, Function] as PropType<ComponentClass>,
//         default: undefined,
//     },
// });

const rootClasses = defineClasses(
    ["rootClass", "o-breadcrumb"],
    [
        "sizeClass",
        "o-breadcrumb__",
        computed(() => props.size),
        computed(() => !!props.size),
    ],
    [
        "separatorClass",
        "o-breadcrumb__",
        computed(() => props.separator),
        computed(() => !!props.separator),
    ],
    [
        "alignClass",
        "o-breadcrumb__",
        computed(() => props.align),
        computed(() => !!props.align),
    ],
);
</script>

<template>
    <component :is="tag" :class="rootClasses" data-oruga="breadcrumb">
        <!-- BreadcrumbItems -->
        <slot></slot>
    </component>
</template>
